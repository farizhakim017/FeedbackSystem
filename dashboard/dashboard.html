<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feedback Dashboard</title>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-firestore-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">


    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Stylesheet -->
    <link rel="stylesheet" href="dashboard.css">
</head>

<body>

    <div class="container">
        <div class="header-container">
            <h1 class="title">Careclinics Patients Feedback Dashboard</h1>
            <button id="selectClinicBtn" class="btn">Select Clinic</button>
        </div>

        <input type="hidden" id="clinic" required>
        <div class="modal-overlay" id="modalOverlay"></div>
        <div class="modal" id="clinicModal">
            <div class="modal-header">Select Your Clinic</div>

            <!-- Search Bar -->
            <input type="text" id="clinicSearch" placeholder="Search clinic..." class="search-bar">

            <!-- Scrollable Clinic List -->
            <div class="clinic-list" id="clinicList">
                <div class="clinic-option" data-clinic="KWS Damansara">KWS Damansara</div>
                <div class="clinic-option" data-clinic="PKC Cheras">PKC Cheras</div>
                <div class="clinic-option" data-clinic="PKC Desa Pandan">PKC Desa Pandan</div>
                <div class="clinic-option" data-clinic="PKC Putrajaya">PKC Putrajaya</div>
                <div class="clinic-option" data-clinic="Klinik Damai Sungai Buloh">Klinik Damai Sungai Buloh</div>
                <div class="clinic-option" data-clinic="KSI Samudra">KSI Samudra</div>
                <div class="clinic-option" data-clinic="Klinik KIP">Klinik KIP</div>
                <div class="clinic-option" data-clinic="One Medic Gul">One Medic Gul</div>
                <div class="clinic-option" data-clinic="MUC Bukit Bintang">MUC Bukit Bintang</div>
                <div class="clinic-option" data-clinic="MUC Labu">MUC Labu</div>
                <div class="clinic-option" data-clinic="Menara KLIA1">Menara KLIA1</div>
                <div class="clinic-option" data-clinic="Menara KLIA2">Menara KLIA2</div>
                <div class="clinic-option" data-clinic="Poliklinik Dinamik">Poliklinik Dinamik</div>
            </div>

            <button class="close-btn neumorphic-btn" type="button">Close</button>
        </div>

        <!-- Recent Users -->
        <div class="box recent-users">
            <h2>Recent Patients ðŸ‘¤</h2>
            <div class="table-container">
                <table id="recent-users-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Phone Number</th>
                            <th>Date</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>

            <div class="view-more-container">
                <button id="viewMoreUsersBtn" class="view-more-btn">View More</button>

            </div>
        </div>

        <!-- Recent Users Popup -->
        <!-- Recent Users Popup -->
        <div id="recentUsersPopup" class="popup-container">
            <div class="popup-content">
                <span class="popup-close">&times;</span>
                <h2>All Patients</h2>
                <table id="all-users-popup-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Phone Number</th>
                            <th>Date</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
                <!-- Download Button -->
                <button id="downloadUsersCSV" class="download-btn">Download CSV</button>
            </div>
        </div>




        <!-- Feedback Chart -->
        <div class="box chart-box">
            <h2>Feedback Distribution</h2>
            <canvas id="feedbackChart"></canvas>
        </div>

        <!-- Total Feedbacks -->
        <div class="box feedback-summary">
            <h2>What can we improve? ðŸ¤”</h2>
            <p>Based on customer feedback about what we should improve. </p>
            <div id="customersays">
                <table id="improvementsTable">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Improvement Suggestion ðŸš€</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
            <button id="viewAllBtn" class="view-all-btn">View All Improvements</button>
        </div>

        <!-- Floating Modal for Full List of Improvements -->
        <div id="improvementModal" class="modal-improve">
            <div class="modal-overlay"></div> <!-- Background Blur Effect -->
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>ðŸš€ All Improvement Suggestions</h2>
                <ul id="fullImprovementList"></ul>
            </div>
        </div>


        <!-- Average Ratings Per Question -->
        <div class="box ratings">
            <h2>Average Ratings Per Question</h2>
            <div id="feedback-container"></div>
        </div>


        <!-- Positive Feedback -->
        <div class="box positive-feedback">
            <h2>Overall Satisfaction</h2>
            <p><strong>Positive Feedback:</strong> <span id="positive-feedback">Loading...</span></p>
            <p><strong>Total Feedbacks:</strong> <span id="total-feedback">Loading...</span></p>
        </div>

        <!-- Positive Feedback -->
        <div class="box positive-feedback">
            <h2>Based on customer's feedback</h2>
            <p><strong>What can we do actually?</strong></p>
        </div>

        <!-- Positive Feedback -->
        <div class="box positive-feedback">
            <h2>Based on customer's feedback</h2>
            <p><strong>What can we do actually?</strong></p>
        </div>

        <!-- Positive Feedback -->
        <div class="box positive-feedback">
            <h2>Based on customer's feedback</h2>
            <p><strong>What can we do actually?</strong></p>
        </div>
        <!-- Positive Feedback -->
        <div class="box positive-feedback">
            <h2>Based on customer's feedback</h2>
            <p><strong>What can we do actually?</strong></p>
        </div>
    </div>

    <!-- JS File -->
    <script src="dashboard.js" type="module"></script>


</body>

</html>